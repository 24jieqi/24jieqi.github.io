{"componentChunkName":"component---src-templates-blog-post-js","path":"/frontEnd/react-router/react-router V5和V6的区别/","result":{"data":{"site":{"siteMetadata":{"title":"HJGP技术知识库"}},"markdownRemark":{"id":"a8bc1004-5e0c-5209-8645-7fa01410729e","excerpt":"1.1 <Switch>替换为了<Routes> ​ 1）v5 中使用 Switch 来匹配路由，是按照路由编写顺序来匹配的；而 v6 中使用 Routes 路由是根据最佳匹配来选择的，而不是按顺序遍历，可以避免路由匹配不成功而产生的 bug。 ​ 2）v5 中路由嵌套是分散在不同组件中的，而 v…","html":"<h4>1.1 &#x3C;<strong>Switch</strong>>替换为了&#x3C;<strong>Routes</strong>></h4>\n<p>​ 1）v5 中使用 Switch 来匹配路由，是按照路由编写顺序来匹配的；而 v6 中使用 Routes 路由是根据最佳匹配来选择的，而不是按顺序遍历，可以避免路由匹配不成功而产生的 bug。</p>\n<p>​ 2）v5 中路由嵌套是分散在不同组件中的，而 v6 中是集中在一个地方进行定义的，能够一眼就看到整个项目的所有路线。</p>\n<h4>1.2 &#x3C;<strong>Route</strong>>中属性的变化</h4>\n<p>​ 1）v5 中使用&#x3C;Route path=” component={} render=(props)=>{}> 而 v6 中使用&#x3C;Route path=” element={<Component>}>，v6 中可以更方便的传入自定义的属性给路由组件。</p>\n<p>​ 2）v5 中 path 支持正则表达式，v6 中不支持正则表达式。</p>\n<p>​ 3）v5 中不会忽略路径最后面的/，v6 中直接将后面的/删除，统一渲染成<a href='/user/me' />，消除了歧义。</p>\n<h4>1.3 使用 useRoutes 代替了 react-router-config</h4>\n<p>​ v5 的 react-router-config 包中的所有功能都转移到了 v6 的核心包中。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>useRoutes<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">const</span> routes <span class=\"token operator\">=</span> <span class=\"token function\">useRoutes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>User <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'/detail'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>Detail <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n        \t<span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span><span class=\"token string\">'product'</span><span class=\"token punctuation\">,</span>\n        \t<span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>Product <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>1.4 使用 useNavigate 代替了 useHistory</h4>\n<p>​ 1）v5 中使用 useHistory 来跳转路由</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useHistory <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span>\n<span class=\"token keyword\">const</span> history <span class=\"token operator\">=</span> <span class=\"token function\">useHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">goBack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">goForward</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>​ 2）v6 中使用 useNavigate 来跳转路由</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useNavigate <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span>\n<span class=\"token keyword\">const</span> navigate <span class=\"token operator\">=</span> <span class=\"token function\">useNavigate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">navigate</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4>1.5 NavLink 中的一些属性的修改</h4>\n<p>​ 1）v5 中</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>NavLink\n  to<span class=\"token operator\">=</span><span class=\"token string\">\"/messages\"</span>\n  style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"blue\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  activeStyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">\"green\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  className<span class=\"token operator\">=</span><span class=\"token string\">\"nav-link\"</span>\n  activeClassName<span class=\"token operator\">=</span><span class=\"token string\">\"activated\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<p>​ 2）v6 中</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>NavLink\n  to<span class=\"token operator\">=</span><span class=\"token string\">\"/messages\"</span>\n  style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> isActive <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> isActive <span class=\"token operator\">?</span> <span class=\"token string\">\"red\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"black\"</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> isActive <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isActive <span class=\"token operator\">?</span> <span class=\"token string\">\"active\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span></code></pre></div>\n<h4>1.6 v5 和 v6 中包的大小不一样</h4>\n<p>​ 1）v5 包的大小为 20kb。</p>\n<p>​ 2）v6 包的大小为 8kb。</p>","frontmatter":{"title":"react-router V5和V6的区别","date":"2022-01-25","description":null,"author":"TT"}},"previous":{"fields":{"slug":"/frontEnd/demo/扫雷/"},"frontmatter":{"title":"使用 React 实现扫雷游戏"}},"next":{"fields":{"slug":"/frontEnd/其他/React Hook的学习/"},"frontmatter":{"title":"React Hook的学习"}}},"pageContext":{"id":"a8bc1004-5e0c-5209-8645-7fa01410729e","previousPostId":"61a57c17-e90b-5073-befb-c595fa61c110","nextPostId":"da91d71f-7d45-59e0-91c9-fcf289f6e7bc"}},"staticQueryHashes":["2841359383","3257411868"]}